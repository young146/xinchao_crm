# 📅 발행 일정 관리 - 사용 방법

## 🎯 왜 필요한가?

### 문제
```
❌ 호수만으로는 실제 날짜를 알 수 없음
❌ "Vol 552~557" → 언제부터 언제까지?
❌ 격주 발행인지, 3주 간격인지 불명확
❌ 계약 기간이 실제로 몇 개월인지 모름
```

### 해결
```
✅ 각 호수마다 실제 발행 날짜 매핑
✅ 계약 기간을 날짜로 자동 변환
✅ 불규칙 발행 주기 시각화
✅ 다음 발행일 자동 계산
```

---

## 📅 발행 주기 규칙

### 기본 원칙
```
📆 한 달에 2번 발행 (격주)
   - 매월 1~7일: 상반기호
   - 매월 15~21일: 하반기호
   
예시:
- Vol 551: 2026.01.05
- Vol 552: 2026.01.20 (15일 간격)
- Vol 553: 2026.02.05 (16일 간격)
- Vol 554: 2026.02.20 (15일 간격)
```

### 예외 주기
```
⚠️ 3개월에 한 번씩 3주 간격

예시:
- Vol 551: 2026.01.05
- Vol 552: 2026.01.20 (15일)
- Vol 553: 2026.02.05 (16일)
- Vol 554: 2026.02.20 (15일) ← 정상
- Vol 559: 2026.05.07 (17일)
- Vol 560: 2026.05.21 (14일)
- Vol 561: 2026.06.04 (14일) ← 정상

3주 간격 예시:
- Vol 551 → Vol 552: 15일 (정상)
- Vol 552 → Vol 553: 16일 (구정 연휴)
- Vol 559 → Vol 560: 14일 (노동절 후)
```

### 휴일 조정
```
🎄 신년 연휴: 1월 1~3일 → 1월 5일로 연기
🧧 구정 연휴: 음력 설날 주간 → 다음 주로 연기
🌹 노동절: 5월 1일 → 일정 조정
```

---

## 🖥️ 발행 일정 화면

### 1. 현재 및 다음 발행
```
┌──────────────────┬──────────────────┐
│ 📖 현재 발행 중  │ 📆 다음 발행 예정│
│                  │                  │
│   Vol 553        │   Vol 554        │
│                  │                  │
│ 2026년 2월 5일   │   5일 후 발행   │
│                  │ 2026년 2월 20일  │
└──────────────────┴──────────────────┘
```

### 2. 월별 발행 일정
```
[1월] [2월] [3월] [4월] ... [12월]
       ^^^
      선택됨

┌────────────┬────────────┬────────────┐
│ Vol 553    │ Vol 554    │            │
│ 발행됨 ✓  │ 예정        │            │
│ 2026.02.05 │ 2026.02.20 │            │
│ 📆 격주    │ 📆 격주    │            │
│  (16일)    │  (15일)    │            │
└────────────┴────────────┴────────────┘
```

### 3. 고객 카드 - 계약 날짜 표시
```
╔═══════════════════════════════════╗
║ 📄 계약 정보                      ║
║ ─────────────────────────────────║
║ 시작 (호수): Vol 552              ║
║ 종료 (호수): Vol 557              ║
║ 📅 시작 날짜: 2026.01.20          ║
║ 📅 종료 날짜: 2026.04.02          ║
║ 계약 기간: 6개 호 (약 2개월)     ║
╚═══════════════════════════════════╝

╔═══════════════════════════════════╗
║ 📊 호수별 광고 현황               ║
║ ─────────────────────────────────║
║ ┌────────┐ ┌────────┐ ┌────────┐║
║ │Vol 552 │ │Vol 553 │ │Vol 554 │║
║ │ ✓발행  │ │ ✓발행  │ │  예정  │║
║ │01.20   │ │02.05   │ │02.20   │║
║ └────────┘ └────────┘ └────────┘║
║                                   ║
║ 💡 총 6개 호 (2026.01.20~04.02) ║
╚═══════════════════════════════════╝
```

---

## ⚙️ 발행 일정 설정 방법

### 1. 파일 위치
```
src/utils/volumeSchedule.js
```

### 2. 일정 추가/수정
```javascript
export const VOLUME_SCHEDULE = {
  // 호수: { date: "발행일", status: "상태" }
  
  553: { 
    date: "2026-02-05",    // YYYY-MM-DD 형식
    status: "published"     // "published" 또는 "planned"
  },
  
  554: { 
    date: "2026-02-20", 
    status: "planned"       // 아직 발행 안 됨
  },
  
  // 계속 추가...
};
```

### 3. 상태 값
```
"published" - 이미 발행됨 (과거/현재)
"planned"   - 발행 예정 (미래)
```

### 4. 업데이트 시점
```
매번 새 호 발행 시:
1. volumeSchedule.js 파일 열기
2. 해당 호수의 status를 "planned" → "published"로 변경
3. 저장 후 앱 재시작
```

---

## 📊 실제 활용 예시

### 예시 1: 계약 날짜 확인
```
고객: Awesome Academy
계약: Vol 552~557

볼륨별 날짜:
- Vol 552: 2026.01.20 (발행됨 ✓)
- Vol 553: 2026.02.05 (발행됨 ✓)
- Vol 554: 2026.02.20 (예정)
- Vol 555: 2026.03.05 (예정)
- Vol 556: 2026.03.19 (예정)
- Vol 557: 2026.04.02 (예정)

결과:
✅ 계약 기간: 2026.01.20 ~ 2026.04.02 (약 2.5개월)
✅ 현재 2개 호 발행, 4개 호 남음
```

### 예시 2: 불규칙 발행 감지
```
Vol 551 → Vol 552: 15일 간격 (📆 격주)
Vol 552 → Vol 553: 16일 간격 (⚠️ 구정 연휴)
Vol 559 → Vol 560: 14일 간격 (📆 정상)
Vol 560 → Vol 561: 14일 간격 (⚠️ 3주 간격 후 복귀)
```

### 예시 3: 선불 판단에 날짜 활용
```
고객: Pet Like Park
계약: Vol 549~554 (6개 호)
총액: $2,700

현재 상황 (2026.02.16):
- 현재 Vol: 553
- 발행된 호수: 549, 550, 551, 552, 553 (5개)
- 남은 호수: 554 (1개, 2026.02.20 발행 예정)

수금 분석:
- 기대 수금: $2,250 (5개 호분)
- 실제 수금: $2,700 (6개 호분, 전액 선불)
- 선수금: +$450 (아직 안 나온 1개 호분)
→ 💰💰 전액 선불 고객
```

---

## 🔧 기술 정보

### 주요 함수

#### 1. getCurrentVolume()
```javascript
// 오늘 날짜 기준으로 현재 발행 중인 볼륨 자동 계산
const currentVol = getCurrentVolume();
// 결과: 553 (2026.02.16 기준)
```

#### 2. getContractDates(startVol, endVol)
```javascript
// 계약 호수를 날짜로 변환
const dates = getContractDates(552, 557);
// 결과: {
//   startDate: 2026-01-20,
//   endDate: 2026-04-02,
//   duration: 73일
// }
```

#### 3. getVolumeRangeDates(startVol, endVol)
```javascript
// 모든 호수의 발행일 배열로 반환
const dates = getVolumeRangeDates(552, 557);
// 결과: [
//   { volume: 552, date: 2026-01-20, status: "published" },
//   { volume: 553, date: 2026-02-05, status: "published" },
//   { volume: 554, date: 2026-02-20, status: "planned" },
//   ...
// ]
```

#### 4. analyzePublishingCycle(volumeNumber)
```javascript
// 이전 호수와의 간격 분석
const cycle = analyzePublishingCycle(553);
// 결과: {
//   cycle: "biweekly",      // 또는 "triweekly"
//   label: "격주 발행",
//   days: 16,
//   isRegular: true
// }
```

---

## 💡 활용 시나리오

### 시나리오 1: 고객에게 계약 기간 안내
```
"안녕하세요, Awesome Academy님!

귀사의 광고 계약 기간은 다음과 같습니다:

📅 계약 기간: Vol 552~557 (6개 호)
📅 발행 날짜: 2026년 1월 20일 ~ 4월 2일
📅 약 2.5개월간 광고 게재

현재까지 Vol 552, 553 (2개 호) 발행되었으며,
앞으로 4개 호가 남았습니다.

감사합니다!"
```

### 시나리오 2: 재계약 타이밍 계산
```
고객: K&K Global
계약 종료: Vol 561 (2026.06.04)
현재: Vol 553 (2026.02.05)

분석:
- 종료까지: 4개월 남음
- 재계약 제안 타이밍: 3월 중순 (Vol 556 발행 시)
- 목표: 계약 종료 2개월 전 재계약 완료
```

### 시나리오 3: 발행 일정 공유
```
내부 회의:
"2월에는 Vol 553, 554 총 2개 호 발행됩니다.
- Vol 553: 2월 5일 (구정 고려)
- Vol 554: 2월 20일

3월은 Vol 555, 556 발행 예정이며,
Vol 556은 3월 19일로 평소보다 하루 늦습니다."
```

---

## 🔄 정기 업데이트 작업

### 매월 초 (새 호 발행 시)

#### 1단계: 상태 업데이트
```javascript
// src/utils/volumeSchedule.js 파일 열기

// 이전 (발행 전)
554: { date: "2026-02-20", status: "planned" },

// 수정 (발행 후)
554: { date: "2026-02-20", status: "published" },
```

#### 2단계: 현재 볼륨 확인
```javascript
// src/utils/contractStatus.js 파일 열기

// 수정
export const CURRENT_VOLUME = 554; // 553 → 554로 변경
```

#### 3단계: 앱 재시작
```bash
npm start
```

---

## 📋 2026년 발행 일정 (전체)

### 1분기 (1~3월)
```
┌──────┬────────────┬─────────┬──────────┐
│ 호수 │ 발행일      │ 간격    │ 상태     │
├──────┼────────────┼─────────┼──────────┤
│ 551  │ 2026.01.05 │ -       │ 발행됨 ✓│
│ 552  │ 2026.01.20 │ 15일    │ 발행됨 ✓│
│ 553  │ 2026.02.05 │ 16일 ⚠️ │ 발행됨 ✓│
│ 554  │ 2026.02.20 │ 15일    │ 예정     │
│ 555  │ 2026.03.05 │ 14일    │ 예정     │
│ 556  │ 2026.03.19 │ 14일    │ 예정     │
└──────┴────────────┴─────────┴──────────┘
```

### 2분기 (4~6월)
```
┌──────┬────────────┬─────────┬──────────┐
│ 호수 │ 발행일      │ 간격    │ 상태     │
├──────┼────────────┼─────────┼──────────┤
│ 557  │ 2026.04.02 │ 14일    │ 예정     │
│ 558  │ 2026.04.16 │ 14일    │ 예정     │
│ 559  │ 2026.05.07 │ 21일 ⚠️ │ 예정     │
│ 560  │ 2026.05.21 │ 14일    │ 예정     │
│ 561  │ 2026.06.04 │ 14일    │ 예정     │
│ 562  │ 2026.06.18 │ 14일    │ 예정     │
└──────┴────────────┴─────────┴──────────┘
```

---

## 🎨 UI 활용

### 1. 고객 카드에서
```
고객 클릭 → 계약 정보 섹션

시작 (호수): Vol 552
종료 (호수): Vol 557
📅 시작 날짜: 2026.01.20
📅 종료 날짜: 2026.04.02
계약 기간: 6개 호 (약 2개월)

📊 호수별 광고 현황
[Vol 552 ✓] [Vol 553 ✓] [Vol 554] [Vol 555] [Vol 556] [Vol 557]
[01.20]     [02.05]     [02.20]  [03.05]  [03.19]  [04.02]

💡 총 6개 호
📅 2026.01.20 ~ 2026.04.02 (약 2개월)
```

### 2. 발행 일정 탭에서
```
"📅 발행 일정" 탭 클릭 → 월별 일정 확인

현재: Vol 553 (2026.02.05 발행)
다음: Vol 554 (5일 후, 2026.02.20)

[1월] [2월] [3월] ...
       ^^^

2월 발행 일정:
- Vol 553: 2026.02.05 ✓ (격주, 16일 간격)
- Vol 554: 2026.02.20 (격주, 15일 간격)
```

---

## ⚠️ 중요 사항

### 1. 초기 설정
```
✅ VOLUME_SCHEDULE에 최소 1년치 일정 입력 필요
✅ 실제 발행일 기준으로 정확히 입력
✅ 휴일, 연휴 고려하여 날짜 조정
```

### 2. 정기 업데이트
```
📆 매월 새 호 발행 시:
   1. status를 "published"로 변경
   2. CURRENT_VOLUME 업데이트
   3. 앱 재시작

⚠️ 업데이트 안 하면:
   - 현재 호수가 부정확
   - 계약 상태 판정 오류
   - 선불/연체 판정 오류
```

### 3. 불규칙 주기 관리
```
3주 간격 발행 시:
- 일정에 명시 (16~21일 간격)
- UI에 ⚠️ 표시
- 이유 설명 (휴일 등)
```

---

## 📊 계약 분석 개선

### 이전 (호수만 사용)
```
계약: Vol 552~557
→ 6개 호 계약
→ 기간: 불명확
```

### 현재 (날짜 포함)
```
계약: Vol 552~557
→ 6개 호 계약
→ 기간: 2026.01.20 ~ 2026.04.02
→ 약 2.5개월 (73일)
→ 발행 주기: 격주 (평균 15일)
```

---

## 🚀 사용 방법

### 1. 발행 일정 확인
```
1. "📅 발행 일정" 탭 클릭
2. 월 선택 (1~12월)
3. 해당 월 발행 호수 확인
4. 날짜, 간격, 상태 확인
```

### 2. 고객 계약 날짜 확인
```
1. "📊 고객 관리" 탭
2. 고객 클릭
3. 계약 정보 섹션에서 날짜 확인
4. 호수별 현황에서 발행일 확인
```

### 3. 현재 및 다음 호수 확인
```
1. "📅 발행 일정" 탭
2. 상단 "현재 발행 중" 카드 확인
3. "다음 발행 예정" 카드에서 며칠 후인지 확인
```

---

## 📦 생성된 파일

### 🆕 새로 생성
1. `src/utils/volumeSchedule.js` - 발행 일정 관리 로직
2. `src/components/VolumeSchedule.js` - 발행 일정 UI
3. `발행일정_관리방법.md` - 이 파일

### 🔧 수정됨
1. `src/components/CustomerCard.js` - 계약 날짜 표시 추가
2. `src/App.js` - 발행 일정 탭 추가

---

## 🎯 효과

### Before (호수만)
```
"Vol 552~557 계약입니다"
→ 언제부터? 언제까지? 모름
```

### After (날짜 포함)
```
"Vol 552~557 계약입니다 (2026.01.20 ~ 04.02)"
→ 1월 20일부터 4월 2일까지 약 2.5개월
→ 현재 2개 호 발행, 4개 호 남음
→ 다음 발행: 4일 후 (2월 20일)
```

---

## 📞 추가 지원

- 📄 `결제패턴_설명.md` - 결제 패턴 분석
- 📄 `계약상태_사용방법.md` - 계약 상태 관리
- 📄 `미수금계산_설명.md` - 미수금 계산 로직

---

**💡 발행 일정을 체계적으로 관리하고 고객에게 정확한 정보를 제공하세요!**
